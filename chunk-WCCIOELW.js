import{$ as ve,A as w,B as W,C as j,D as N,E as i,F as r,G as l,H as J,I as g,J as E,K,L as a,M as y,N as X,O as q,P as Y,Q as Z,R as Ee,S as Re,U as Te,V as U,W as ee,X as we,Y as ke,Z as te,a as be,aa as Me,b as xe,ba as De,c as v,d as V,e as T,ea as k,f as $,fa as Le,g as Se,ga as ne,h as fe,ha as A,i as ye,ia as Ie,j as z,k as p,l as ge,m as O,n as P,o as F,p as H,q as Ce,r as G,s as _,t as b,u as D,v as s,w as m,x as Q,y as d,z as _e}from"./chunk-KNJILLRX.js";var B=class o{activatedRoute=p(k);router=p(ne);placeholder=_.required();txtValue=G();queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";inputValue=ee(()=>this.queryParam);onSearch(e){e&&this.txtValue.emit(this.toLowerCase(e))}debounceTime=U(e=>{let t=this.toLowerCase(this.inputValue());if(!t)return;let n=setTimeout(()=>{this.updateQueryParams(t),this.txtValue.emit(t)},300);e(()=>{clearTimeout(n)})});toLowerCase=e=>e.toLowerCase().trim();updateQueryParams(e){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{query:e}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["country-search-input"]],inputs:{placeholder:[1,"placeholder"]},outputs:{txtValue:"txtValue"},decls:5,vars:2,consts:[["txtSearch",""],[1,"flex","flex-row","gap-4","mt-2"],["type","text","autofocus","",1,"input","inpur-border","mr-2","w-60",3,"keyup.enter","keyup","placeholder","value"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){if(t&1){let c=J();i(0,"section",1)(1,"input",2,0),g("keyup.enter",function(){O(c);let h=K(2);return P(n.onSearch(h.value))})("keyup",function(){O(c);let h=K(2);return P(n.inputValue.set(h.value))}),r(),i(3,"button",3),g("click",function(){O(c);let h=K(2);return P(n.onSearch(h.value))}),a(4,"Buscar"),r()()}t&2&&(s(),d("placeholder",n.placeholder())("value",n.inputValue()))},styles:["section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;text-transform:uppercase}section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{text-transform:none}"]})};var Oe=o=>["/country/by",o],Pe=(o,e)=>e.cca2;function Fe(o,e){if(o&1&&(i(0,"tr")(1,"td"),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),l(6,"img",2),r(),i(7,"td"),a(8),r(),i(9,"td"),a(10),r(),i(11,"td")(12,"span",3),a(13),Z(14,"number"),r()(),i(15,"td")(16,"a",4),a(17,"M\xE1s informaci\xF3n"),r()()()),o&2){let t=e.$implicit,n=e.$index;s(2),y(n+1),s(2),y(t.flag),s(2),d("src",t.flagSvg,D)("alt",t.name),s(2),y(t.name),s(2),y(t.capital),s(3),y(Re(14,8,t.population,"1.0-0")),s(3),d("routerLink",Y(11,Oe,t.cca2))}}function je(o,e){if(o&1&&(i(0,"tr")(1,"td",5),a(2),r()()),o&2){let t=E();s(2),X(" ",t.errorMessage()," ")}}function Ne(o,e){o&1&&(i(0,"tr")(1,"td",6),a(2," Cargando informaci\xF3n "),l(3,"span",7),r()())}function qe(o,e){o&1&&(i(0,"tr")(1,"td",8),a(2," No se encontr\xF3 informaci\xF3n "),r()())}var M=class o{countries=_.required();isLoading=_(!1);isEmpty=_(!1);errorMessage=_();static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["country-data-list"]],inputs:{countries:[1,"countries"],isLoading:[1,"isLoading"],isEmpty:[1,"isEmpty"],errorMessage:[1,"errorMessage"]},decls:23,vars:3,consts:[[1,"mt-5"],[1,"table","table-md","w-full"],[1,"w-15",3,"src","alt"],[1,"badge","badge-secondary"],[1,"link-primary","cursor-pointer",3,"routerLink"],["colspan","8",1,"text-center","text-red-500"],["colspan","8",1,"text-center","text-secondary"],[1,"loading","loading-dots","loading-sm"],["colspan","8",1,"text-center","text-primary"]],template:function(t,n){t&1&&(i(0,"section",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),a(5,"#"),r(),i(6,"th"),a(7,"\xCDcono"),r(),i(8,"th"),a(9,"Bandera"),r(),i(10,"th"),a(11,"Nombre"),r(),i(12,"th"),a(13,"Capital"),r(),i(14,"th"),a(15,"Poblaci\xF3n"),r(),l(16,"th"),r()(),i(17,"tbody"),j(18,Fe,18,13,"tr",null,Pe),Q(20,je,3,1,"tr")(21,Ne,4,0,"tr")(22,qe,3,0,"tr"),r()()()),t&2&&(s(18),N(n.countries()),s(2),w(n.errorMessage()?20:-1),s(),w(n.isLoading()?21:-1),s(),w(n.isEmpty()&&!n.isLoading()?22:-1))},dependencies:[te,A],encapsulation:2})};var oe=class o{http=p(De);get(e,t){let n=`${e}`;return this.http.get(n,t)}post(e,t,n){let c=`${e}`;return this.http.post(c,t,n)}put(e,t,n){let c=`${e}`;return this.http.put(c,t,n)}patch(e,t,n){let c=`${e}`;return this.http.patch(c,t,n)}delete(e,t){let n=`${e}`;return this.http.delete(n,t)}getAuthHeaders(e){return new ve({Authorization:`Bearer ${e}`,"Content-Type":"application/json"})}getDefaultHeaders(){return new ve({"Content-Type":"application/json",Accept:"application/json"})}buildParams(e){let t=new Me;return Object.keys(e).forEach(n=>{e[n]!==null&&e[n]!==void 0&&(t=t.set(n,e[n].toString()))}),t}getWithAuth(e,t){let n={headers:this.getAuthHeaders(t)};return this.get(e,n)}postWithAuth(e,t,n){let c={headers:this.getAuthHeaders(n)};return this.post(e,t,c)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var L=class{static restCountryToCountry(e){return{cca2:e.cca2,cca3:e.cca3,flag:e.flag,flagSvg:e.flags.svg,name:e.translations.spa.common??"No Spanish name",capital:e?.capital?.join(" | ")??"-",population:e.population,officialName:e.name.official,region:e.region,subRegion:e.subregion,borders:e.borders,coatOfArmsSvg:e.coatOfArms.svg}}static restCountryToCountryArray(e){return e.map(t=>this.restCountryToCountry(t))}};var re="https://restcountries.com/v3.1",S=class o{queryCacheCountry=new Map;generalService=p(oe);getCountryByCapital(e){return this.queryCacheCountry.has(e)?v(this.queryCacheCountry.get(e)??[]):this.generalService.get(`${re}/capital/${e}`).pipe(Se(3e3),T(t=>L.restCountryToCountryArray(t)),fe(t=>this.queryCacheCountry.set(e,t)),$(t=>(console.error(`Error: ${t}`),V(()=>"No se logro obtener informaci\xF3n"))))}getCountryByCountry(e){return this.queryCacheCountry.has(e)?v(this.queryCacheCountry.get(e)??[]):this.generalService.get(`${re}/name/${e}`).pipe(T(t=>L.restCountryToCountryArray(t)),fe(t=>this.queryCacheCountry.set(e,t)),$(t=>(console.error(`Error: ${t}`),V(()=>"No se logro obtener informaci\xF3n"))))}getCountryByCode(e){return this.generalService.get(`${re}/alpha/${e}`).pipe(T(t=>L.restCountryToCountryArray(t)),T(t=>t.at(0)),$(t=>V(()=>`No se logro obtener informaci\xF3n con code: ${e}`)))}getCountryByRegion(e){return this.generalService.get(`${re}/region/${e}`).pipe(T(t=>L.restCountryToCountryArray(t)),$(t=>V(()=>`No se logro obtener informaci\xF3n con la region: ${e}`)))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};function he(o,e){let t=!e?.manualCleanup;t&&!e?.injector&&ge(he);let n=t?e?.injector?.get(Ce)??p(Ce):null,c=Ae(e?.equal),u;e?.requireSync?u=b({kind:0},{equal:c}):u=b({kind:1,value:e?.initialValue},{equal:c});let h,I=o.subscribe({next:f=>u.set({kind:1,value:f}),error:f=>{if(e?.rejectErrors)throw f;u.set({kind:2,error:f})},complete:()=>{h?.()}});if(e?.requireSync&&u().kind===0)throw new ye(601,!1);return h=n?.onDestroy(I.unsubscribe.bind(I)),Te(()=>{let f=u();switch(f.kind){case 1:return f.value;case 2:throw f.error;case 0:throw new ye(601,!1)}},{equal:e?.equal})}function Ae(o=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&o(e.value,t.value)}function R(o){return o?.injector||ge(R),we(xe(be({},o),{loader:void 0,stream:e=>{let t,n=()=>t.unsubscribe();e.abortSignal.addEventListener("abort",n);let c=b({value:void 0}),u,h=new Promise(f=>u=f);function I(f){c.set(f),u?.(c),u=void 0}return t=o.loader(e).subscribe({next:f=>I({value:f}),error:f=>{I({error:f}),e.abortSignal.removeEventListener("abort",n)},complete:()=>{u&&I({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",n)}}),h}}))}var Be=()=>[],ie=class o{countryService=p(S);query=b("");userResource=R({request:()=>({query:this.query()}),loader:({request:e})=>e.query?this.countryService.getCountryByCountry(e.query):v([])});onEmitSearch(e){this.query.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["app-by-country"]],decls:2,vars:5,consts:[["placeholder","Buscar por pa\xEDs",3,"txtValue"],[3,"countries","errorMessage","isLoading","isEmpty"]],template:function(t,n){if(t&1&&(i(0,"country-search-input",0),g("txtValue",function(u){return n.onEmitSearch(u)}),r(),l(1,"country-data-list",1)),t&2){let c,u;s(),d("countries",(c=n.userResource.value())!==null&&c!==void 0?c:q(4,Be))("errorMessage",n.userResource.error())("isLoading",n.userResource.isLoading())("isEmpty",((u=n.userResource.value())==null?null:u.length)===0)}},dependencies:[B,M],encapsulation:2})};var ae=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["country-top-menu"]],decls:17,vars:0,consts:[[1,"p-4","w-full"],[1,"menu","bg-base-200","sm:menu-horizontal","rounded-box","gap-3"],["routerLink","by-capital","routerLinkActive","btn-primary",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","m14.134 6.992l3.396-3.397a2.033 2.033 0 0 1 2.875 2.875l-3.397 3.396l1.838 9.145c.235 1.17-2.034 2.8-2.638 1.25l-2.69-6.904l-3.493 3.493c.17 2.041.207 2.72-1.224 4.15l-2.175-3.626L3 15.199c1.43-1.431 2.109-1.395 4.15-1.224l3.493-3.492l-6.904-2.691c-1.55-.604.08-2.874 1.25-2.638z"],["routerLink","by-country","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","m21 14l-9 4l-9-4m18-4l-9 4l-9-4l9-4z"],["routerLink","by-region","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M3 8.593c0-1.527 0-2.29.393-2.735c.139-.159.308-.285.497-.372c1.416-.653 3.272 1.066 4.77 1.013q.297-.011.587-.082c2.184-.535 3.552-3.08 5.798-3.39c1.287-.18 2.7.598 3.904 1.014c.99.342 1.485.513 1.768.92S21 5.91 21 6.99v8.422c0 1.526 0 2.29-.393 2.735a1.5 1.5 0 0 1-.497.371c-1.416.653-3.272-1.065-4.77-1.012a3 3 0 0 0-.587.081c-2.184.535-3.552 3.08-5.798 3.391c-1.281.178-4.847-.75-5.672-1.935C3 18.636 3 18.096 3 17.014zm6-2.052v14.255m6-17.615v14.255"]],template:function(t,n){t&1&&(i(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),F(),i(4,"svg",3),l(5,"path",4),r(),a(6," Por capital "),r()(),H(),i(7,"li")(8,"a",5),F(),i(9,"svg",3),l(10,"path",6),r(),a(11," Por pa\xEDs "),r()(),H(),i(12,"li")(13,"a",7),F(),i(14,"svg",3),l(15,"path",8),r(),a(16," Por regi\xF3n "),r()()()())},dependencies:[A,Ie],encapsulation:2})};var se=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["app-layout-country"]],decls:3,vars:0,consts:[[1,"px-4"]],template:function(t,n){t&1&&(l(0,"country-top-menu"),i(1,"section",0),l(2,"router-outlet"),r())},dependencies:[Le,ae],encapsulation:2})};var Ve=()=>[],ce=class o{countryService=p(S);activatedRoute=p(k);query=b("");userResource=R({request:()=>({query:this.query()}),loader:({request:e})=>e.query?this.countryService.getCountryByCapital(e.query):v([])});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["app-by-capital"]],decls:2,vars:5,consts:[["placeholder","Buscar por capital",3,"txtValue"],[3,"countries","errorMessage","isLoading","isEmpty"]],template:function(t,n){if(t&1&&(i(0,"country-search-input",0),g("txtValue",function(u){return n.query.set(u)}),r(),l(1,"country-data-list",1)),t&2){let c,u;s(),d("countries",(c=n.userResource.value())!==null&&c!==void 0?c:q(4,Ve))("errorMessage",n.userResource.error())("isLoading",n.userResource.isLoading())("isEmpty",((u=n.userResource.value())==null?null:u.length)===0)}},dependencies:[B,M],encapsulation:2})};function $e(o,e){if(o&1){let t=J();i(0,"button",3),g("click",function(){let c=O(t).$implicit,u=E();return P(u.selectedRegion.set(c))}),a(1),r()}if(o&2){let t=e.$implicit,n=E();_e("text-primary",n.selectedRegion()===t),s(),X(" ",t," ")}}var He=o=>(o=o.toLowerCase().trim(),{africa:"Africa",americas:"Americas",asia:"Asia",europe:"Europe",oceania:"Oceania",antarctic:"Antarctic"}[o]??"Americas"),ue=class o{activatedRoute=p(k);router=p(ne);regions=["Africa","Americas","Asia","Europe","Oceania","Antarctic"];queryParam=this.activatedRoute.snapshot.queryParamMap.get("region")??"";selectedRegion=ee(()=>He(this.queryParam));region=G();emitRegion=U(()=>{let e=this.selectedRegion();this.updateQueryParams(e),this.region.emit(e)});updateQueryParams(e){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{region:e}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["country-select-region"]],outputs:{region:"region"},decls:4,vars:0,consts:[[1,"mt-5"],[1,"flex","flex-row","gap-4","justify-center","items-center","max-md:flex-col"],[1,"btn","btn-outline","text-xl","w-[100px]",3,"text-primary"],[1,"btn","btn-outline","text-xl","w-[100px]",3,"click"]],template:function(t,n){t&1&&(i(0,"section",0)(1,"div",1),j(2,$e,2,3,"button",2,W),r()()),t&2&&(s(2),N(n.regions))},styles:["section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:70%;font-weight:400}section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}section[_ngcontent-%COMP%]   button.text-primary[_ngcontent-%COMP%]{opacity:1;font-weight:600;transform:scale(1.17);transition:all .2s ease-in-out}"]})};var Ue=()=>[],le=class o{countryService=p(S);region=b("");countryResource=R({request:()=>({query:this.region()}),loader:({request:e})=>e.query?this.countryService.getCountryByRegion(e.query):v([])});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["app-by-region"]],decls:2,vars:5,consts:[[3,"region"],[3,"countries","isLoading","isEmpty","errorMessage"]],template:function(t,n){if(t&1&&(i(0,"country-select-region",0),g("region",function(u){return n.region.set(u)}),r(),l(1,"country-data-list",1)),t&2){let c,u;s(),d("countries",(c=n.countryResource.value())!==null&&c!==void 0?c:q(4,Ue))("isLoading",n.countryResource.isLoading())("isEmpty",((u=n.countryResource.value())==null?null:u.length)===0)("errorMessage",n.countryResource.error())}},dependencies:[M,ue],encapsulation:2})};var pe=class o{location=p(ke);goToBack(){this.location.back()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["app-not-found"]],decls:7,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","my-10"],["xmlns","http://www.w3.org/2000/svg","width","110","height","110","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8v3a1 1 0 0 0 1 1h3m0-4v8m10-8v3a1 1 0 0 0 1 1h3m0-4v8m-11-6v4a2 2 0 1 0 4 0v-4a2 2 0 1 0-4 0"],[1,"btn","text-primary","cursor-pointer","hover:text-secondary","mt-5",3,"click"]],template:function(t,n){t&1&&(i(0,"section",0),F(),i(1,"svg",1),l(2,"path",2),r(),H(),i(3,"h1"),a(4,"No se encontr\xF3 informaci\xF3n"),r(),i(5,"a",3),g("click",function(){return n.goToBack()}),a(6,"Regresar"),r()())},encapsulation:2})};var ze=o=>["/country/by",o];function Ge(o,e){if(o&1&&(i(0,"a",18)(1,"div",4),a(2),r(),l(3,"img",19),r()),o&2){let t=e.$implicit,n=E();d("routerLink",Y(4,ze,t)),s(2),y(t),s(),d("alt",t)("src",n.getFlagUrl(t),D)}}var me=class o{country=_.required();getFlagUrl(e){return`https://flagcdn.com/${e.toLowerCase().slice(0,2)}.svg`}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["country-information"]],inputs:{country:[1,"country"]},decls:44,vars:15,consts:[[1,"flex","flex-col"],[1,"stats","shadow"],[1,"stat","place-items-center"],[1,"stat-title"],[1,"stat-value"],[1,"stat-desc"],[1,"stat-value","text-secondary"],[1,"w-15",3,"src","alt"],[1,"mt-10"],[1,"diff","aspect-16/9","w-[70%]","mx-auto"],[1,"diff-item-1"],[1,"blur","brightness-90",3,"alt","src"],[1,"diff-item-2"],[3,"alt","src"],[1,"diff-resizer"],[1,"flex","flex-col","my-10"],[1,"stat-title","text-center","mb-1"],[1,"stats"],[1,"stat","place-items-center","cursor-pointer",3,"routerLink"],[1,"w-15",3,"alt","src"]],template:function(t,n){t&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),a(4,"Nombre"),r(),i(5,"div",4),a(6),r(),i(7,"div",5),a(8),r()(),i(9,"div",2)(10,"div",3),a(11,"Poblaci\xF3n"),r(),i(12,"div",6),a(13),Z(14,"number"),r(),i(15,"div",5),a(16),r()(),i(17,"div",2)(18,"div",3),a(19,"Regi\xF3n"),r(),i(20,"div",4),a(21),r(),i(22,"div",5),a(23),r()(),i(24,"div",2)(25,"div",3),a(26,"Escudo de Armas"),r(),l(27,"img",7),i(28,"div",5),a(29),r()()()(),i(30,"section",8)(31,"figure",9)(32,"div",10),l(33,"img",11),r(),i(34,"div",12),l(35,"img",13),r(),l(36,"div",14),r()(),i(37,"section",15)(38,"h1",16),a(39,"Fronteras"),r(),i(40,"div",0)(41,"div",17),j(42,Ge,4,6,"a",18,W),r()()()),t&2&&(s(6),y(n.country().name),s(2),y(n.country().capital),s(5),y(Ee(14,13,n.country().population)),s(3),y(n.country().officialName),s(5),y(n.country().region),s(2),y(n.country().subRegion),s(4),d("src",n.country().coatOfArmsSvg,D)("alt","Escudo de Armas "+n.country().name),s(2),y(n.country().name),s(4),d("alt",n.country().name)("src",n.country().flagSvg,D),s(2),d("alt",n.country().name)("src",n.country().flagSvg,D),s(7),N(n.country().borders))},dependencies:[te,A],encapsulation:2})};function Qe(o,e){o&1&&l(0,"app-not-found")}function We(o,e){o&1&&(i(0,"h1",0),a(1,"Cargando ..."),r())}function Je(o,e){if(o&1&&l(0,"country-information",1),o&2){let t=E();d("country",t.conutryResource.value())}}var de=class o{countryCode=he(p(k).params.pipe(T(e=>e.code)));countryService=p(S);conutryResource=R({request:()=>({code:this.countryCode()}),loader:({request:e})=>e.code?this.countryService.getCountryByCode(e.code):v()});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=m({type:o,selectors:[["app-country"]],decls:3,vars:3,consts:[[1,"text-3xl","text-center","mt-50"],[3,"country"]],template:function(t,n){t&1&&Q(0,Qe,1,0,"app-not-found")(1,We,2,0,"h1",0)(2,Je,1,1,"country-information",1),t&2&&(w(n.conutryResource.error()?0:-1),s(),w(n.conutryResource.isLoading()?1:-1),s(),w(n.conutryResource.hasValue()?2:-1))},dependencies:[pe,me],styles:["section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;text-decoration:none;font-size:1rem;padding:10px 0;transition:.5s ease}"]})};var On=[{path:"",component:se,children:[{path:"by-capital",component:ce},{path:"by-country",component:ie},{path:"by-region",component:le},{path:"by/:code",component:de},{path:"**",redirectTo:"by-capital"}]}];export{On as countryRoutes};
